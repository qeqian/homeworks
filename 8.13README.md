# 8.13

# 中断系统:

## 1. 中断的介绍:

- 单片机正常执行任务，去执行中断任务，并且可以嵌套，执行优先级更高的中断。
- 通常CPU内部的紧急事件叫异常(非法指令(除零)，地址访问越界等)。
- CPU外部的叫中断(GPIO引脚电平变化，定时器溢出等)，一般统称为中断。

## 2. 中断控制器(NVIC):

- AIRCR(寄存器):8-10位:优先级分组i(3.4.5.6.7)，确定了抢占优先级和子优先级的位数分组i:4-i。(STM32是4-7位，一共有四个位数)。
- 数字越小，优先级越大，RESET是负数。

## 3. 时钟:

- 定时器分为高级定时器(1和8)，通用定时器，基础定时器，低功耗定时器。
- TIM2和TIM5都是32位定时器，其他都是16位定时器。
- 定时器的溢出时间计算:time=(ARR+1)*(PSC+1)/Tclk。
- 预分频寄存器，设置定时器的分频;计数器寄存器，记一次数就是定时器周期;自动重载寄存器，递增计数。